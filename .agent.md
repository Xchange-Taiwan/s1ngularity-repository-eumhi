# X-Talent Frontend Development Guide

## Project Overview

X-Talent is a mentor-mentee matching platform built with Next.js 14, TypeScript, and Tailwind CSS. The platform connects mentors and mentees, providing a free resource for users to either find a mentor or become one to share their experiences.

- **Live Site**: https://xtalent.vercel.app/
- **Tech Stack**: Next.js 14, TypeScript, Tailwind CSS, NextAuth.js, Radix UI, Storybook
- **Package Manager**: pnpm (version 9.12.3)
- **Node Version**: 20.x

## Key Architecture Patterns

### App Router Structure

- Uses Next.js 14 App Router with TypeScript
- Route groups for organization: `(landing)`, `(sign)`
- Protected routes via middleware with NextAuth.js
- API routes under `/api/auth/`

### Authentication

- NextAuth.js v5 beta with custom providers
- Credentials provider for email/password
- Custom Google OAuth integration
- Session management with JWT tokens
- Middleware-based route protection

### Component Architecture

- **UI Components**: Radix UI + shadcn/ui pattern in `src/components/ui/`
- **Feature Components**: Organized by domain (auth, profile, mentorPool, etc.)
- **Shared Components**: Layout, Icon, landing components
- **Design System**: Custom color tokens in `src/design/tokens/`

## Development Setup

### Prerequisites

```bash
# Install Node.js 20
node -v  # Should show 20.x.x

# Install pnpm globally
npm install -g pnpm@9.12.3
pnpm -v  # Should show 9.12.3
```

### Installation

```bash
git clone https://github.com/Xchange-Taiwan/X-Talent-Frontend.git
cd X-Talent_Frontend
pnpm install

# Copy environment file (request from team)
# .env.development.local required for development
```

### Development Commands

```bash
pnpm run dev          # Start development server
pnpm run dev-turbo    # Start with Turbo mode
pnpm run build        # Production build
pnpm run lint         # Run linting and formatting
pnpm run storybook    # Start Storybook
```

## File Organization

### Source Structure

```
src/
├── app/                 # Next.js App Router pages
│   ├── (landing)/      # Public landing pages
│   ├── auth/           # Authentication pages
│   ├── profile/        # User profile pages
│   └── api/            # API routes
├── components/         # React components
│   ├── ui/            # Base UI components (shadcn/ui)
│   ├── auth/          # Authentication components
│   ├── profile/       # Profile-related components
│   └── Layout/        # Layout components
├── hooks/             # Custom React hooks
├── lib/               # Utility libraries
├── schemas/           # Zod validation schemas
├── services/          # API service functions
├── design/            # Design tokens and themes
└── styles/            # Global CSS
```

### Asset Organization

```
public/
├── landing/           # Landing page assets
├── profile/           # Profile page assets
└── logo files

src/assets/
├── auth/              # Authentication page assets
└── landing/           # Landing page component assets
```

## Coding Standards

### TypeScript

- Strict TypeScript configuration enabled
- Path aliases: `@/*` for `src/*`, `@/public/*` for `public/*`
- Zod for runtime validation and type inference
- Proper typing for NextAuth.js sessions and tokens

### Styling

- Tailwind CSS with custom design tokens
- CSS variables for theming support
- Component variants using `class-variance-authority`
- Responsive design with mobile-first approach
- Custom color system in `src/design/tokens/color.ts`

### Component Patterns

- Functional components with TypeScript interfaces
- Custom hooks for business logic
- Compound component patterns for complex UI
- Storybook stories for component documentation
- Radix UI primitives for accessibility

### Code Quality

- ESLint with TypeScript and Next.js rules
- Prettier for code formatting
- Husky pre-commit hooks with lint-staged
- Simple import sorting plugin
- Storybook for component development

## Authentication Flow

### Route Protection

- Public routes defined in `src/routes.ts`
- Middleware checks authentication status
- Automatic redirect to sign-in for protected routes
- Special handling for profile edit pages

### Session Management

- NextAuth.js with custom JWT callbacks
- User data includes: id, name, avatar, isMentor, onBoarding status
- Token-based API authentication
- Google OAuth integration

## API Integration

### Service Layer

- Organized by feature in `src/services/`
- Separate files for different domains (auth, profile, search)
- Error handling and response transformation
- Type-safe API calls with proper error handling

### Environment Variables

- `NEXTAUTH_URL` and `NEXTAUTH_SECRET` required
- `NEXT_PUBLIC_API_URL` for backend API
- Additional secrets in `.env.development.local`

## Component Development

### UI Components

- Follow shadcn/ui patterns in `src/components/ui/`
- Use `cn()` utility for className merging
- Implement proper TypeScript interfaces
- Support variant props with CVA

### Feature Components

- Group by domain/feature area
- Include Storybook stories for complex components
- Use custom hooks for state management
- Implement proper error boundaries

### Styling Guidelines

- Use Tailwind utility classes
- Custom colors from design tokens
- Responsive design with breakpoint prefixes
- Consistent spacing and typography scales

## Testing Accounts

Use these accounts for development and testing:

| Role    | Email                          |
| ------- | ------------------------------ |
| Visitor | testing_visitor@xchange.com.tw |
| Mentee  | testing_mentee@xchange.com.tw  |
| Mentor  | testing_mentor@xchange.com.tw  |

_Password should be requested from other developers_

## Deployment

### Vercel Integration

- Automatic deployments from main branch
- Environment variables configured in Vercel dashboard
- Storybook deployed separately via GitHub Actions

### Build Process

- Next.js static optimization
- Image optimization with Sharp
- TypeScript compilation checks
- ESLint validation in CI/CD

## Best Practices

### Performance

- Use Next.js Image component for optimized images
- Implement proper loading states
- Code splitting with dynamic imports
- Optimize bundle size with proper imports

### Accessibility

- Radix UI components provide ARIA support
- Semantic HTML structure
- Proper focus management
- Color contrast compliance

### Internationalization

- Default language set to `zh-TW` (Traditional Chinese)
- Prepared for multi-language support
- Consistent text handling patterns

### Security

- Environment variable validation
- Secure authentication flow
- Protected API routes
- Input validation with Zod schemas

## Common Patterns

### Form Handling

- React Hook Form with Zod validation
- Custom form components in `src/components/auth/`
- Error handling and display patterns
- Loading states during submission

### State Management

- React hooks for local state
- NextAuth.js for authentication state
- Custom hooks for complex logic
- Service layer for API state

### Error Handling

- Try-catch blocks in async functions
- User-friendly error messages
- Toast notifications for feedback
- Proper error boundaries

## Development Workflow

1. **Feature Development**

   - Create feature branch from main
   - Develop components with Storybook
   - Implement proper TypeScript types
   - Add error handling and loading states

2. **Code Quality**

   - Run `pnpm run lint` before committing
   - Pre-commit hooks enforce standards
   - Review TypeScript errors
   - Test with different user roles

3. **Testing**

   - Use provided testing accounts
   - Test authentication flows
   - Verify responsive design
   - Check accessibility features

4. **Deployment**
   - Push to feature branch
   - Create pull request with template
   - Automatic Vercel preview deployment
   - Merge after review and testing
